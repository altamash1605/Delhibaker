<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Delhi Bakers — Payment</title>
    <meta name="theme-color" content="#fce7f3">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
  </head>
  <body class="bg-rose-50 text-rose-900 antialiased [font-family:Inter,ui-sans-serif,system-ui] max-w-md mx-auto selection:bg-rose-200 selection:text-rose-900">
    <!-- Header -->
    <header class="sticky top-0 z-40 border-b border-rose-200/70 bg-rose-50/80 backdrop-blur">
      <div class="px-4 py-3 flex items-center justify-between">
        <button onclick="history.back()" class="inline-flex items-center gap-2 text-rose-700 hover:text-rose-900 active:scale-[.98] transition">
          <i data-lucide="chevron-left" class="h-5 w-5"></i>
        </button>
        <div class="flex items-center gap-3">
          <div class="h-9 w-9 rounded-lg bg-rose-100 text-rose-700 flex items-center justify-center font-semibold tracking-tight">
            DB
          </div>
          <div>
            <h1 class="text-[20px] leading-6 tracking-tight font-semibold">Payment</h1>
            <p class="text-xs text-rose-500">Delhi Bakers</p>
          </div>
        </div>
        <div class="inline-flex items-center gap-2 text-rose-700">
          <i data-lucide="shield-check" class="h-5 w-5"></i>
        </div>
      </div>
    </header>

    <main class="px-4 pt-4 pb-40 space-y-4">
      <!-- Secure Banner -->
      <section class="relative overflow-hidden rounded-xl border border-rose-200 bg-gradient-to-b from-rose-50 to-rose-100">
        <div class="relative p-4">
          <div class="flex items-center gap-2 text-rose-700">
            <i data-lucide="lock" class="h-5 w-5"></i>
            <span class="text-sm font-medium">Secure checkout</span>
          </div>
          <p class="mt-1 text-[13px] text-rose-600">256-bit encryption • UPI &amp; Cards supported</p>
        </div>
      </section>

      <!-- Order Summary Compact -->
      <section class="rounded-xl bg-white border border-rose-200 shadow-sm">
        <div class="px-4 pt-4 pb-3 border-b border-rose-100">
          <div class="flex items-center gap-2">
            <i data-lucide="receipt" class="h-5 w-5 text-rose-600"></i>
            <h2 class="text-[18px] tracking-tight font-semibold">Summary</h2>
          </div>
        </div>
        <div class="p-4 space-y-3">
          <div class="flex items-center justify-between text-[14px]">
            <span class="text-rose-600">Items</span>
            <span id="sumItems" class="font-medium">1 kg • Round • Vanilla</span>
          </div>
          <div class="flex items-center justify-between text-[14px]">
            <span class="text-rose-600">Subtotal</span>
            <span id="sumSubtotal" class="font-medium">₹1,200</span>
          </div>
          <div class="flex items-center justify-between text-[14px]">
            <span class="text-rose-600">Delivery</span>
            <span id="sumDelivery" class="font-medium">₹99</span>
          </div>
          <div class="flex items-center justify-between text-[14px]">
            <span class="text-rose-600">Discount</span>
            <span id="sumDiscount" class="font-medium text-emerald-700">- ₹0</span>
          </div>
          <div class="pt-2 mt-1 border-t border-rose-100 flex items-center justify-between">
            <span class="text-[15px] font-semibold">Total</span>
            <div class="flex items-center gap-1.5">
              <i data-lucide="wallet" class="h-5 w-5 text-rose-600"></i>
              <span id="sumTotal" class="text-[17px] font-semibold tracking-tight">₹1,299</span>
            </div>
          </div>
          <p class="text-[11px] text-rose-500">Taxes included. You’ll receive an order confirmation after payment.</p>
        </div>
      </section>

      <!-- Promo Code -->
      <section class="rounded-xl bg-white border border-rose-200 shadow-sm">
        <div class="px-4 pt-4 pb-3 border-b border-rose-100">
          <div class="flex items-center gap-2">
            <i data-lucide="ticket" class="h-5 w-5 text-rose-600"></i>
            <h2 class="text-[18px] tracking-tight font-semibold">Promo code</h2>
          </div>
        </div>
        <div class="p-4 space-y-3">
          <div class="flex items-center gap-3 rounded-lg border border-rose-200 bg-white px-3 py-2.5 focus-within:ring-2 focus-within:ring-rose-400 ring-inset transition">
            <i data-lucide="badge-percent" class="h-5 w-5 text-rose-500"></i>
            <input id="promo" type="text" placeholder="Enter code (e.g. WELCOME10)" class="w-full bg-transparent outline-none text-[15px] placeholder:text-rose-400">
            <button id="applyPromo" class="text-rose-700 hover:text-rose-900 text-sm font-medium active:scale-[.98] transition">Apply</button>
          </div>
          <p id="promoMsg" class="text-[11px] text-rose-500">10% off up to ₹150 on first order with WELCOME10</p>
        </div>
      </section>

      <!-- Payment Method -->
      <section class="rounded-xl bg-white border border-rose-200 shadow-sm">
        <div class="px-4 pt-4 pb-3 border-b border-rose-100">
          <div class="flex items-center gap-2">
            <i data-lucide="credit-card" class="h-5 w-5 text-rose-600"></i>
            <h2 class="text-[18px] tracking-tight font-semibold">Payment method</h2>
          </div>
        </div>
        <div class="p-4 space-y-4">
          <!-- Segmented control -->
          <div class="grid grid-cols-2 gap-2">
            <label class="relative">
              <input type="radio" name="payMethod" value="upi" class="peer absolute inset-0 opacity-0" checked="">
              <div class="flex items-center justify-center gap-2 rounded-lg border border-rose-300 bg-rose-50 px-3 py-3 text-rose-700 peer-checked:bg-rose-600 peer-checked:text-white peer-checked:border-rose-600 transition">
                <i data-lucide="scan-line" class="h-5 w-5"></i>
                <span class="text-sm font-medium">UPI</span>
              </div>
            </label>
            <label class="relative">
              <input type="radio" name="payMethod" value="card" class="peer absolute inset-0 opacity-0">
              <div class="flex items-center justify-center gap-2 rounded-lg border border-rose-300 bg-rose-50 px-3 py-3 text-rose-700 peer-checked:bg-rose-600 peer-checked:text-white peer-checked:border-rose-600 transition">
                <i data-lucide="credit-card" class="h-5 w-5"></i>
                <span class="text-sm font-medium">Card</span>
              </div>
            </label>
          </div>

          <!-- UPI form -->
          <div id="upiForm" class="space-y-3">
            <div class="flex items-center gap-3 rounded-lg border border-rose-200 bg-white px-3 py-2.5 focus-within:ring-2 focus-within:ring-rose-400 ring-inset transition">
              <i data-lucide="at-sign" class="h-5 w-5 text-rose-500"></i>
              <input id="upiId" type="text" placeholder="yourname@bank" class="w-full bg-transparent outline-none text-[15px] placeholder:text-rose-400">
              <button id="verifyUpi" class="text-rose-700 hover:text-rose-900 text-sm font-medium active:scale-[.98] transition">Verify</button>
            </div>
            <p id="upiStatus" class="text-[11px] text-rose-500">Enter a valid UPI ID linked to your bank.</p>
          </div>

          <!-- Card form -->
          <div id="cardForm" class="space-y-3 hidden">
            <div class="flex items-center gap-3 rounded-lg border border-rose-200 bg-white px-3 py-2.5 focus-within:ring-2 focus-within:ring-rose-400 ring-inset transition">
              <i data-lucide="hash" class="h-5 w-5 text-rose-500"></i>
              <input id="cardNumber" inputmode="numeric" autocomplete="cc-number" placeholder="Card number" class="w-full bg-transparent outline-none text-[15px] placeholder:text-rose-400 tracking-[0.02em]">
            </div>
            <div class="grid grid-cols-2 gap-3">
              <div class="flex items-center gap-3 rounded-lg border border-rose-200 bg-white px-3 py-2.5 focus-within:ring-2 focus-within:ring-rose-400 ring-inset transition">
                <i data-lucide="calendar" class="h-5 w-5 text-rose-500"></i>
                <input id="cardExpiry" inputmode="numeric" autocomplete="cc-exp" placeholder="MM/YY" class="w-full bg-transparent outline-none text-[15px] placeholder:text-rose-400">
              </div>
              <div class="flex items-center gap-3 rounded-lg border border-rose-200 bg-white px-3 py-2.5 focus-within:ring-2 focus-within:ring-rose-400 ring-inset transition">
                <i data-lucide="shield" class="h-5 w-5 text-rose-500"></i>
                <input id="cardCvv" inputmode="numeric" autocomplete="off" placeholder="CVV" class="w-full bg-transparent outline-none text-[15px] placeholder:text-rose-400">
              </div>
            </div>
            <div class="flex items-center gap-2 justify-between">
              <div class="flex items-center gap-2">
                <i data-lucide="wallet-minimal" class="h-5 w-5 text-rose-600"></i>
                <span class="text-[13px] text-rose-700 font-medium">Save card for faster checkout</span>
              </div>
              <label class="relative inline-flex items-center">
                <input id="saveCard" type="checkbox" class="peer sr-only">
                <span class="w-12 h-7 rounded-full border border-rose-300 bg-rose-100 peer-checked:bg-rose-600 transition-colors duration-300 relative">
                  <span class="absolute left-1 top-1 h-5 w-5 rounded-full bg-white shadow transition-transform duration-300 peer-checked:translate-x-5"></span>
                </span>
              </label>
            </div>
          </div>
        </div>
      </section>

      <!-- Billing address -->
      <section class="rounded-xl bg-white border border-rose-200 shadow-sm">
        <div class="px-4 pt-4 pb-3 border-b border-rose-100">
          <div class="flex items-center gap-2">
            <i data-lucide="home" class="h-5 w-5 text-rose-600"></i>
            <h2 class="text-[18px] tracking-tight font-semibold">Billing address</h2>
          </div>
        </div>
        <div class="p-4 space-y-3">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <i data-lucide="map-pin" class="h-5 w-5 text-rose-600"></i>
              <span class="text-[13px] text-rose-700 font-medium">Same as delivery</span>
            </div>
            <label class="relative inline-flex items-center">
              <input id="sameAsDelivery" type="checkbox" class="peer sr-only" checked="">
              <span class="w-12 h-7 rounded-full border border-rose-300 bg-rose-100 peer-checked:bg-rose-600 transition-colors duration-300 relative">
                <span class="absolute left-1 top-1 h-5 w-5 rounded-full bg-white shadow transition-transform duration-300 peer-checked:translate-x-5"></span>
              </span>
            </label>
          </div>
          <div id="billingFields" class="space-y-3 hidden">
            <div class="flex items-center gap-3 rounded-lg border border-rose-200 bg-white px-3 py-2.5 focus-within:ring-2 focus-within:ring-rose-400 ring-inset transition">
              <i data-lucide="navigation" class="h-5 w-5 text-rose-500"></i>
              <input id="billAddress1" type="text" placeholder="Address line" class="w-full bg-transparent outline-none text-[15px] placeholder:text-rose-400">
            </div>
            <div class="grid grid-cols-3 gap-3">
              <div class="col-span-2 flex items-center gap-3 rounded-lg border border-rose-200 bg-white px-3 py-2.5 focus-within:ring-2 focus-within:ring-rose-400 ring-inset transition">
                <i data-lucide="map" class="h-5 w-5 text-rose-500"></i>
                <input id="billCity" type="text" placeholder="City" class="w-full bg-transparent outline-none text-[15px] placeholder:text-rose-400">
              </div>
              <div class="flex items-center gap-3 rounded-lg border border-rose-200 bg-white px-3 py-2.5 focus-within:ring-2 focus-within:ring-rose-400 ring-inset transition">
                <i data-lucide="hash" class="h-5 w-5 text-rose-500"></i>
                <input id="billPin" inputmode="numeric" type="text" placeholder="PIN" class="w-full bg-transparent outline-none text-[15px] placeholder:text-rose-400">
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Terms -->
      <section class="rounded-xl bg-white border border-rose-200 shadow-sm">
        <div class="p-4 space-y-3">
          <label class="relative inline-flex items-start gap-3 cursor-pointer">
            <input id="agree" type="checkbox" class="peer absolute left-0 top-1.5 h-4 w-4 opacity-0">
            <span class="mt-0.5 h-5 w-5 rounded-md border border-rose-300 bg-rose-50 flex items-center justify-center peer-checked:bg-rose-600 peer-checked:text-white peer-checked:border-rose-600 transition">
              <i data-lucide="check" class="h-4 w-4 text-transparent peer-checked:text-white"></i>
            </span>
            <span class="text-[13px] text-rose-700">I agree to the Terms and Privacy Policy.</span>
          </label>
          <div id="alert" class="hidden rounded-lg border border-rose-300 bg-rose-100 px-3 py-2 text-[13px] text-rose-800">
            <span id="alertMsg">Please review your details.</span>
          </div>
        </div>
      </section>
    </main>

    <!-- Sticky Footer Action -->
    <div class="fixed bottom-0 inset-x-0 z-50 border-t border-rose-200 bg-rose-50/95 backdrop-blur">
      <div class="mx-auto max-w-md px-4 py-3">
        <div class="flex items-center gap-3">
          <div class="flex-1 rounded-xl border border-rose-200 bg-white px-3 py-2">
            <div class="flex items-center justify-between">
              <span class="text-[12px] text-rose-500">Total</span>
              <span id="miniTotal" class="text-[16px] font-semibold tracking-tight">₹1,299</span>
            </div>
            <div class="flex items-center justify-between">
              <span id="miniMethod" class="text-[12px] text-rose-600 truncate">UPI</span>
              <span class="text-[12px] text-rose-600">Secure</span>
            </div>
          </div>
          <button id="payBtn" class="flex-1 inline-flex items-center justify-center gap-2 rounded-xl bg-rose-600 text-white px-4 py-3 text-[15px] font-medium active:translate-y-[1px] transition hover:bg-rose-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-400 disabled:opacity-60 disabled:cursor-not-allowed">
            <i data-lucide="lock" class="h-5 w-5"></i>
            Pay ₹1,299
          </button>
        </div>
      </div>
    </div>

    <script>
      // Init icons
      document.addEventListener('DOMContentLoaded', () => {
        lucide.createIcons({ attrs: { 'stroke-width': 1.5 } });
      });

      // Elements
      const methodInputs = document.querySelectorAll('input[name="payMethod"]');
      const upiForm = document.getElementById('upiForm');
      const cardForm = document.getElementById('cardForm');
      const miniMethod = document.getElementById('miniMethod');

      const promoInput = document.getElementById('promo');
      const applyPromoBtn = document.getElementById('applyPromo');
      const promoMsg = document.getElementById('promoMsg');

      const sumSubtotal = document.getElementById('sumSubtotal');
      const sumDelivery = document.getElementById('sumDelivery');
      const sumDiscount = document.getElementById('sumDiscount');
      const sumTotal = document.getElementById('sumTotal');
      const miniTotal = document.getElementById('miniTotal');
      const payBtn = document.getElementById('payBtn');

      const sameAsDelivery = document.getElementById('sameAsDelivery');
      const billingFields = document.getElementById('billingFields');

      const alertBox = document.getElementById('alert');
      const alertMsg = document.getElementById('alertMsg');

      const upiId = document.getElementById('upiId');
      const verifyUpi = document.getElementById('verifyUpi');
      const upiStatus = document.getElementById('upiStatus');

      const cardNumber = document.getElementById('cardNumber');
      const cardExpiry = document.getElementById('cardExpiry');
      const cardCvv = document.getElementById('cardCvv');
      const agree = document.getElementById('agree');

      // Mock values (keep in sync with summary)
      let subtotal = 1200;
      let delivery = 99;
      let discount = 0;

      function formatINR(n) {
        return '₹' + Math.max(0, Math.round(n)).toLocaleString('en-IN');
      }
      function updateTotals() {
        sumSubtotal.textContent = formatINR(subtotal);
        sumDelivery.textContent = formatINR(delivery);
        sumDiscount.textContent = discount ? `- ${formatINR(discount)}` : '- ₹0';
        const total = subtotal + delivery - discount;
        sumTotal.textContent = formatINR(total);
        miniTotal.textContent = formatINR(total);
        payBtn.innerHTML = `<i data-lucide="lock" class="h-5 w-5"></i> Pay ${formatINR(total)}`;
        lucide.createIcons({ attrs: { 'stroke-width': 1.5 } });
      }
      updateTotals();

      // Promo apply
      applyPromoBtn.addEventListener('click', () => {
        const code = (promoInput.value || '').trim().toUpperCase();
        if (!code) {
          promoMsg.textContent = 'Enter a promo code.';
          promoMsg.className = 'text-[11px] text-rose-600';
          return;
        }
        if (code === 'WELCOME10') {
          const calc = Math.min(150, Math.round(0.10 * (subtotal + delivery)));
          discount = calc;
          promoMsg.textContent = `Applied WELCOME10 • You saved ${formatINR(discount)}`;
          promoMsg.className = 'text-[11px] text-emerald-700';
        } else {
          discount = 0;
          promoMsg.textContent = 'Code not valid.';
          promoMsg.className = 'text-[11px] text-rose-600';
        }
        updateTotals();
      });

      // Toggle billing fields
      sameAsDelivery.addEventListener('change', () => {
        billingFields.classList.toggle('hidden', sameAsDelivery.checked);
      });

      // Payment method switch
      methodInputs.forEach(i => {
        i.addEventListener('change', () => {
          const val = document.querySelector('input[name="payMethod"]:checked')?.value || 'upi';
          upiForm.classList.toggle('hidden', val !== 'upi');
          cardForm.classList.toggle('hidden', val !== 'card');
          miniMethod.textContent = val.toUpperCase();
        });
      });

      // UPI verify (basic)
      verifyUpi.addEventListener('click', (e) => {
        e.preventDefault();
        const id = (upiId.value || '').trim();
        alertBox.classList.add('hidden');
        if (!id || !id.includes('@') || id.length < 6) {
          upiStatus.textContent = 'Invalid UPI ID. Please check.';
          upiStatus.className = 'text-[11px] text-rose-600';
          return;
        }
        upiStatus.textContent = 'UPI ID verified.';
        upiStatus.className = 'text-[11px] text-emerald-700';
      });

      // Card formatting
      cardNumber.addEventListener('input', () => {
        const digits = cardNumber.value.replace(/\D/g, '').slice(0, 19);
        cardNumber.value = digits.replace(/(.{4})/g, '$1 ').trim();
      });
      cardExpiry.addEventListener('input', () => {
        const v = cardExpiry.value.replace(/\D/g, '').slice(0, 4);
        if (v.length >= 3) {
          cardExpiry.value = v.slice(0, 2) + '/' + v.slice(2);
        } else {
          cardExpiry.value = v;
        }
      });
      cardCvv.addEventListener('input', () => {
        cardCvv.value = cardCvv.value.replace(/\D/g, '').slice(0, 3);
      });

      // Validation helpers
      function showFieldRing(el) {
        el?.parentElement?.classList.add('ring-2','ring-rose-400');
        setTimeout(() => el?.parentElement?.classList.remove('ring-2','ring-rose-400'), 1200);
      }
      function payValidation() {
        alertBox.classList.add('hidden');
        const method = document.querySelector('input[name="payMethod"]:checked')?.value || 'upi';
        if (!agree.checked) {
          alertMsg.textContent = 'Please agree to the Terms and Privacy Policy.';
          alertBox.classList.remove('hidden');
          return false;
        }
        if (!sameAsDelivery.checked) {
          const addr = document.getElementById('billAddress1');
          const city = document.getElementById('billCity');
          const pin = document.getElementById('billPin');
          if (!addr.value.trim()) { showFieldRing(addr); alert('Enter billing address.'); return false; }
          if (!city.value.trim()) { showFieldRing(city); alert('Enter billing city.'); return false; }
          if (!pin.value.trim())  { showFieldRing(pin);  alert('Enter billing PIN.'); return false; }
        }
        if (method === 'upi') {
          if (!upiId.value.trim() || !upiId.value.includes('@')) {
            showFieldRing(upiId);
            alertMsg.textContent = 'Enter a valid UPI ID.';
            alertBox.classList.remove('hidden');
            return false;
          }
        } else if (method === 'card') {
          const num = cardNumber.value.replace(/\s/g, '');
          if (num.length < 12) { showFieldRing(cardNumber); alertMsg.textContent = 'Enter a valid card number.'; alertBox.classList.remove('hidden'); return false; }
          if (!/^\d{2}\/\d{2}$/.test(cardExpiry.value)) { showFieldRing(cardExpiry); alertMsg.textContent = 'Enter expiry as MM/YY.'; alertBox.classList.remove('hidden'); return false; }
          if (cardCvv.value.length < 3) { showFieldRing(cardCvv); alertMsg.textContent = 'Enter valid CVV.'; alertBox.classList.remove('hidden'); return false; }
        }
        return true;
      }

      // Pay handler (mock)
      payBtn.addEventListener('click', (e) => {
        e.preventDefault();
        if (!payValidation()) return;

        payBtn.disabled = true;
        const original = payBtn.innerHTML;
        payBtn.innerHTML = `<i data-lucide="loader-circle" class="h-5 w-5 animate-spin"></i> Processing...`;
        lucide.createIcons({ attrs: { 'stroke-width': 1.5 } });

        setTimeout(() => {
          alertMsg.textContent = 'Payment successful! Your order is confirmed.';
          alertBox.classList.remove('hidden');
          alertBox.classList.remove('bg-rose-100', 'border-rose-300', 'text-rose-800');
          alertBox.classList.add('bg-emerald-50', 'border-emerald-300', 'text-emerald-800');
          payBtn.innerHTML = `<i data-lucide="check-circle-2" class="h-5 w-5"></i> Paid`;
          lucide.createIcons({ attrs: { 'stroke-width': 1.5 } });
        }, 1500);
      });
    </script>
  
</body></html>